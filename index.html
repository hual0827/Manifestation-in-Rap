<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css" />
    <title>Document</title>

    <style>
      .filler {
height: 20rem;
text-align: center;
}
#scrolly-side .scrolly {
display: flex;
max-width: 60rem;
margin: 3rem auto;
background-color: #f4f4f4;
padding: 1rem;
}
#scrolly-side .scrolly > * {
flex: 1;
}
#scrolly-side .scrolly article {
padding-right: 1rem;
max-width: 30rem;
}
#scrolly-side .scrolly article .step {
min-height: auto;
margin-bottom: 1rem;
background-color: #5b5b5b;
transition: background-color 250ms ease-in-out;
}
#scrolly-side .scrolly article .step:last-of-type {
margin-bottom: 0;
}
#scrolly-side .scrolly article .step.is-active {
background-color: #008080;
}
#scrolly-side .scrolly article .step p {
margin: 0;
padding: 1rem;
text-align: center;
font-weight: 400;
color: #f4f4f4;
}
#scrolly-side .scrolly figure.sticky {
position: sticky;
width: 1080px;
height: 100vh;
background: #969696;
margin: 0;
top: 25vh;
left: 0;
transition: background-image 1s ease-in-out;
}
#scrolly-side .scrolly figure.sticky .bar-outer {
position: absolute;
top: 50%;
left: 5%;
transform: translateY(-50%);
width: 90%;
height: 4rem;
background-color: #fff;
}
#scrolly-side .scrolly figure.sticky .bar-inner {
width: 10%;
height: 100%;
transition: width 1s ease-in-out;
background-color: #daa520;
}

#index-0 {
  z-index: 999;
  position: absolute;
  width: 639px;
}

#index-1, #index-2 {
  z-index: 0;
  position: absolute;
  width: 639px;
}
 </style>

  </head>
<body>
   
</head>
<body>
    <section id="intro">
        <h1 class="intro__hed">Manifestation in Rap</h1>
        <p class="intro__dek">
            Quantitative analysis on how rappers shape their own destiny
        </p>
    </section>  
      <section id='scrolly-side'>
        
        <div class='scrolly'>
          
          <!--  step text   -->
            <article>
            <div class='step' data-url='visualisation/11761839' data-index='0'>
                <p>MONEY</p>
                <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla id eros lorem. Sed lobortis lectus ac interdum mattis. Ut risus arcu, pellentesque ut tortor sit amet, dignissim pellentesque augue. Vestibulum ultricies consectetur neque id commodo. Proin hendrerit leo mi, sit amet varius augue imperdiet quis. Maecenas mi enim, euismod sed nisi vel, tincidunt tempus velit. Pellentesque nec lorem diam. Aliquam ornare scelerisque ante, in iaculis diam placerat at. Vestibulum tincidunt ut mauris vitae rhoncus. Orci varius natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Nam convallis diam massa, vel posuere orci gravida at. Sed massa lectus, congue in pharetra fermentum, varius nec lacus. Ut volutpat non ipsum ut porttitor. Nulla tempor, mi non eleifend tempus, magna nulla rhoncus quam, vel sodales diam augue et neque.

                  Sed erat odio, condimentum in tristique nec, sagittis nec eros. Quisque faucibus velit nec neque pretium, quis eleifend odio blandit. Suspendisse tristique nisl eget accumsan accumsan. Curabitur in egestas quam, ac malesuada ipsum. Maecenas pulvinar, nisl sed vestibulum volutpat, nunc nisl sollicitudin urna, sed efficitur metus nisi sed mi. Nam commodo dui egestas euismod varius. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse vitae porta arcu. Praesent laoreet vitae ipsum vel euismod. Vestibulum risus neque, elementum at efficitur ut, finibus facilisis tellus. Maecenas vel placerat nulla. Phasellus vel tristique sapien, nec pharetra ipsum. Vivamus facilisis pretium libero, id facilisis risus.
                  
                  Aliquam molestie, purus eget rhoncus tincidunt, ipsum ex varius purus, non tincidunt massa ante sit amet neque. Duis sem nulla, lobortis et metus vel, elementum eleifend lorem. Nam rhoncus ac sapien sit amet tincidunt. Sed in malesuada quam. In tincidunt sem a ante vestibulum viverra. Vestibulum sed ante placerat, convallis urna ut, finibus quam. Suspendisse faucibus eleifend venenatis. Praesent fringilla vestibulum auctor. Duis vitae posuere urna.
                  
                  Phasellus sit amet porta ex. Vivamus vestibulum lorem vulputate arcu faucibus fringilla. Vivamus dapibus est a ligula lobortis, nec tincidunt arcu tincidunt. Integer a ante ante. In consequat et eros a aliquet. In et urna a ligula tempor elementum. Morbi convallis ante eget ipsum vehicula, et tempor ligula consectetur. Pellentesque ac neque neque. Cras a mauris orci. Proin porttitor ipsum pharetra auctor tristique. Ut ac eleifend eros, a lacinia leo. Cras quis nisl mi. Cras ipsum ligula, fringilla ac lectus sit amet, lacinia fermentum tellus. Fusce molestie lectus in tortor imperdiet lacinia. Sed ac gravida risus.
                  
                  Quisque eget venenatis mauris. Nulla facilisi. Mauris elementum nibh porttitor mauris dignissim tempus at sed nunc. Proin ac elit tincidunt, blandit urna in, dictum odio. Pellentesque eget mi mi. Vivamus at tellus ut erat maximus porta id id turpis. In hac habitasse platea dictumst. Curabitur id luctus tortor, nec viverra justo.</p>
            </div>
            <div class='step' data-url='visualisation/11761938' data-index='1'>
               <p>DRUGS</p>
               <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla id eros lorem. Sed lobortis lectus ac interdum mattis. Ut risus arcu, pellentesque ut tortor sit amet, dignissim pellentesque augue. Vestibulum ultricies consectetur neque id commodo. Proin hendrerit leo mi, sit amet varius augue imperdiet quis. Maecenas mi enim, euismod sed nisi vel, tincidunt tempus velit. Pellentesque nec lorem diam. Aliquam ornare scelerisque ante, in iaculis diam placerat at. Vestibulum tincidunt ut mauris vitae rhoncus. Orci varius natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Nam convallis diam massa, vel posuere orci gravida at. Sed massa lectus, congue in pharetra fermentum, varius nec lacus. Ut volutpat non ipsum ut porttitor. Nulla tempor, mi non eleifend tempus, magna nulla rhoncus quam, vel sodales diam augue et neque.

                Sed erat odio, condimentum in tristique nec, sagittis nec eros. Quisque faucibus velit nec neque pretium, quis eleifend odio blandit. Suspendisse tristique nisl eget accumsan accumsan. Curabitur in egestas quam, ac malesuada ipsum. Maecenas pulvinar, nisl sed vestibulum volutpat, nunc nisl sollicitudin urna, sed efficitur metus nisi sed mi. Nam commodo dui egestas euismod varius. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse vitae porta arcu. Praesent laoreet vitae ipsum vel euismod. Vestibulum risus neque, elementum at efficitur ut, finibus facilisis tellus. Maecenas vel placerat nulla. Phasellus vel tristique sapien, nec pharetra ipsum. Vivamus facilisis pretium libero, id facilisis risus.
                
                Aliquam molestie, purus eget rhoncus tincidunt, ipsum ex varius purus, non tincidunt massa ante sit amet neque. Duis sem nulla, lobortis et metus vel, elementum eleifend lorem. Nam rhoncus ac sapien sit amet tincidunt. Sed in malesuada quam. In tincidunt sem a ante vestibulum viverra. Vestibulum sed ante placerat, convallis urna ut, finibus quam. Suspendisse faucibus eleifend venenatis. Praesent fringilla vestibulum auctor. Duis vitae posuere urna.
                
                Phasellus sit amet porta ex. Vivamus vestibulum lorem vulputate arcu faucibus fringilla. Vivamus dapibus est a ligula lobortis, nec tincidunt arcu tincidunt. Integer a ante ante. In consequat et eros a aliquet. In et urna a ligula tempor elementum. Morbi convallis ante eget ipsum vehicula, et tempor ligula consectetur. Pellentesque ac neque neque. Cras a mauris orci. Proin porttitor ipsum pharetra auctor tristique. Ut ac eleifend eros, a lacinia leo. Cras quis nisl mi. Cras ipsum ligula, fringilla ac lectus sit amet, lacinia fermentum tellus. Fusce molestie lectus in tortor imperdiet lacinia. Sed ac gravida risus.
                
                Quisque eget venenatis mauris. Nulla facilisi. Mauris elementum nibh porttitor mauris dignissim tempus at sed nunc. Proin ac elit tincidunt, blandit urna in, dictum odio. Pellentesque eget mi mi. Vivamus at tellus ut erat maximus porta id id turpis. In hac habitasse platea dictumst. Curabitur id luctus tortor, nec viverra justo.</p>
            </div>
            <div class='step' data-url='visualisation/11762622' data-index='2'>
              <p>VIOLENCE</p>
              <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla id eros lorem. Sed lobortis lectus ac interdum mattis. Ut risus arcu, pellentesque ut tortor sit amet, dignissim pellentesque augue. Vestibulum ultricies consectetur neque id commodo. Proin hendrerit leo mi, sit amet varius augue imperdiet quis. Maecenas mi enim, euismod sed nisi vel, tincidunt tempus velit. Pellentesque nec lorem diam. Aliquam ornare scelerisque ante, in iaculis diam placerat at. Vestibulum tincidunt ut mauris vitae rhoncus. Orci varius natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Nam convallis diam massa, vel posuere orci gravida at. Sed massa lectus, congue in pharetra fermentum, varius nec lacus. Ut volutpat non ipsum ut porttitor. Nulla tempor, mi non eleifend tempus, magna nulla rhoncus quam, vel sodales diam augue et neque.

                Sed erat odio, condimentum in tristique nec, sagittis nec eros. Quisque faucibus velit nec neque pretium, quis eleifend odio blandit. Suspendisse tristique nisl eget accumsan accumsan. Curabitur in egestas quam, ac malesuada ipsum. Maecenas pulvinar, nisl sed vestibulum volutpat, nunc nisl sollicitudin urna, sed efficitur metus nisi sed mi. Nam commodo dui egestas euismod varius. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse vitae porta arcu. Praesent laoreet vitae ipsum vel euismod. Vestibulum risus neque, elementum at efficitur ut, finibus facilisis tellus. Maecenas vel placerat nulla. Phasellus vel tristique sapien, nec pharetra ipsum. Vivamus facilisis pretium libero, id facilisis risus.
                
                Aliquam molestie, purus eget rhoncus tincidunt, ipsum ex varius purus, non tincidunt massa ante sit amet neque. Duis sem nulla, lobortis et metus vel, elementum eleifend lorem. Nam rhoncus ac sapien sit amet tincidunt. Sed in malesuada quam. In tincidunt sem a ante vestibulum viverra. Vestibulum sed ante placerat, convallis urna ut, finibus quam. Suspendisse faucibus eleifend venenatis. Praesent fringilla vestibulum auctor. Duis vitae posuere urna.
                
                Phasellus sit amet porta ex. Vivamus vestibulum lorem vulputate arcu faucibus fringilla. Vivamus dapibus est a ligula lobortis, nec tincidunt arcu tincidunt. Integer a ante ante. In consequat et eros a aliquet. In et urna a ligula tempor elementum. Morbi convallis ante eget ipsum vehicula, et tempor ligula consectetur. Pellentesque ac neque neque. Cras a mauris orci. Proin porttitor ipsum pharetra auctor tristique. Ut ac eleifend eros, a lacinia leo. Cras quis nisl mi. Cras ipsum ligula, fringilla ac lectus sit amet, lacinia fermentum tellus. Fusce molestie lectus in tortor imperdiet lacinia. Sed ac gravida risus.
                
                Quisque eget venenatis mauris. Nulla facilisi. Mauris elementum nibh porttitor mauris dignissim tempus at sed nunc. Proin ac elit tincidunt, blandit urna in, dictum odio. Pellentesque eget mi mi. Vivamus at tellus ut erat maximus porta id id turpis. In hac habitasse platea dictumst. Curabitur id luctus tortor, nec viverra justo.</p>
            </div>
            <div class='step' data-url='visualisation/11761938' data-index='3'>
              <p>DEATH</p>
              <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla id eros lorem. Sed lobortis lectus ac interdum mattis. Ut risus arcu, pellentesque ut tortor sit amet, dignissim pellentesque augue. Vestibulum ultricies consectetur neque id commodo. Proin hendrerit leo mi, sit amet varius augue imperdiet quis. Maecenas mi enim, euismod sed nisi vel, tincidunt tempus velit. Pellentesque nec lorem diam. Aliquam ornare scelerisque ante, in iaculis diam placerat at. Vestibulum tincidunt ut mauris vitae rhoncus. Orci varius natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Nam convallis diam massa, vel posuere orci gravida at. Sed massa lectus, congue in pharetra fermentum, varius nec lacus. Ut volutpat non ipsum ut porttitor. Nulla tempor, mi non eleifend tempus, magna nulla rhoncus quam, vel sodales diam augue et neque.

                Sed erat odio, condimentum in tristique nec, sagittis nec eros. Quisque faucibus velit nec neque pretium, quis eleifend odio blandit. Suspendisse tristique nisl eget accumsan accumsan. Curabitur in egestas quam, ac malesuada ipsum. Maecenas pulvinar, nisl sed vestibulum volutpat, nunc nisl sollicitudin urna, sed efficitur metus nisi sed mi. Nam commodo dui egestas euismod varius. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse vitae porta arcu. Praesent laoreet vitae ipsum vel euismod. Vestibulum risus neque, elementum at efficitur ut, finibus facilisis tellus. Maecenas vel placerat nulla. Phasellus vel tristique sapien, nec pharetra ipsum. Vivamus facilisis pretium libero, id facilisis risus.
                
                Aliquam molestie, purus eget rhoncus tincidunt, ipsum ex varius purus, non tincidunt massa ante sit amet neque. Duis sem nulla, lobortis et metus vel, elementum eleifend lorem. Nam rhoncus ac sapien sit amet tincidunt. Sed in malesuada quam. In tincidunt sem a ante vestibulum viverra. Vestibulum sed ante placerat, convallis urna ut, finibus quam. Suspendisse faucibus eleifend venenatis. Praesent fringilla vestibulum auctor. Duis vitae posuere urna.
                
                Phasellus sit amet porta ex. Vivamus vestibulum lorem vulputate arcu faucibus fringilla. Vivamus dapibus est a ligula lobortis, nec tincidunt arcu tincidunt. Integer a ante ante. In consequat et eros a aliquet. In et urna a ligula tempor elementum. Morbi convallis ante eget ipsum vehicula, et tempor ligula consectetur. Pellentesque ac neque neque. Cras a mauris orci. Proin porttitor ipsum pharetra auctor tristique. Ut ac eleifend eros, a lacinia leo. Cras quis nisl mi. Cras ipsum ligula, fringilla ac lectus sit amet, lacinia fermentum tellus. Fusce molestie lectus in tortor imperdiet lacinia. Sed ac gravida risus.
                
                Quisque eget venenatis mauris. Nulla facilisi. Mauris elementum nibh porttitor mauris dignissim tempus at sed nunc. Proin ac elit tincidunt, blandit urna in, dictum odio. Pellentesque eget mi mi. Vivamus at tellus ut erat maximus porta id id turpis. In hac habitasse platea dictumst. Curabitur id luctus tortor, nec viverra justo.</p>
            </div>
            </article>
          
           <!--  sticky graphic   -->
            <figure class='sticky'>
                <div id='index-0' class="flourish-embed flourish-chart" data-src="visualisation/11761839"><script src="https://public.flourish.studio/resources/embed.js"></script></div>
                <div id='index-1' class="flourish-embed flourish-chart" data-src="visualisation/11761938"><script src="https://public.flourish.studio/resources/embed.js"></script></div>
			          <div id='index-2' class="flourish-embed flourish-chart" data-src="visualisation/11762622"><script src="https://public.flourish.studio/resources/embed.js"></script></div>
            </figure>
          
        </div>
        
      </section>

      

    <script src="https://unpkg.com/d3@5.4.0/dist/d3.min.js"></script>
    <script src="https://unpkg.com/enter-view@1.0.0/enter-view.min.js"></script>
    <script src="https://unpkg.com/stickyfilljs@2.0.5/dist/stickyfill.js"></script>
    <script>
        const container = d3.select('#scrolly-side');
const stepSel = container.selectAll('.step');

function updateChart(index) {
    var nMinus1 = index - 1;
    var nPlus1 = index + 1;

  const sel = container.select(`[data-index='${index}']`);
  const width = sel.attr('data-width');
  
  const picture = sel.attr('data-url');
  stepSel.classed('is-active', (d, i) => i === index);
  //container.select(`['#index-'${index}']`).style('display', 'block');
  const sticky = container.select('.sticky');
  
  switch(index) {
				case 0:
				sticky.select('#index-0').style('z-index', '999'); 
        sticky.select('#index-1').style('z-index', '0');
				
				break;
				
				case 1:
        sticky.select('#index-0').style('z-index', '0'); 
        sticky.select('#index-1').style('z-index', '999');
				break;

				case 2:
				
				break;
			}

  //console.log(sticky.select('div'));

  
  //container.select('.sticky').style('background-image', 'url('+picture+')');
  container.select('.flourish-embed').attr('data-src', picture);
}

function init() {
  Stickyfill.add(d3.select('.sticky').node());

  enterView({
    selector: stepSel.nodes(),
    offset: 0.5,
    enter: el => {
      const index = +d3.select(el).attr('data-index');
      updateChart(index);
    },
    exit: el => {
      let index = +d3.select(el).attr('data-index');
      index = Math.max(0, index - 1);
      updateChart(index);
    } });

}

init();
    </script>
</body>
</html>

    
</body>
</html>